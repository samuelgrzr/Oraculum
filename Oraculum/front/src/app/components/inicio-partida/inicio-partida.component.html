<div class="container mx-auto px-4 py-8">
    <div class="max-w-lg mx-auto bg-[var(--marble-white)] p-6 rounded-lg shadow-lg border-2 border-[var(--greek-gold)]">
        <div *ngIf="!isLoggedIn()" class="text-center">
            <h2 class="text-2xl font-bold mb-6 text-[var(--greek-blue)]">Las Moiras no te reconocen</h2>
            <div class="mb-6">
                <svg class="mx-auto h-16 w-16 text-[var(--greek-gold)] mb-4" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                    </path>
                </svg>
                <p class="text-lg text-[var(--greek-blue)] mb-4">
                    Es necesario iniciar sesión para poder jugar
                </p>
            </div>
        </div>

        <div *ngIf="isLoggedIn()">
            <h2 class="text-2xl font-bold text-center mb-6 text-[var(--greek-blue)]">Configura tu partida</h2>

            <form [formGroup]="partidaForm" (ngSubmit)="iniciarPartida()" class="space-y-6">
                <!-- Modo de juego -->
                <div class="space-y-2">
                    <label class="block text-lg font-medium text-[var(--greek-blue)]">Modo de juego</label>
                    <div class="grid grid-cols-1 gap-4">
                        <div *ngFor="let modo of modoJuego" class="relative">
                            <input type="radio" [id]="'modo-' + modo" [value]="modo" formControlName="modo_juego"
                                class="hidden peer">
                            <label [for]="'modo-' + modo"
                                class="block p-4 border-2 rounded-lg cursor-pointer transition-all" [ngClass]="{
                    'border-[var(--greek-gold)] bg-white': partidaForm.get('modo_juego')?.value === modo,
                    'border-gray-300 bg-gray-100': partidaForm.get('modo_juego')?.value !== modo
                  }">
                                <span class="block font-medium capitalize text-[var(--greek-blue)]">Modo {{ modo
                                    }}</span>
                                <p class="text-sm text-gray-600 mt-1">{{ descripcionesModos[modo] }}</p>
                            </label>
                        </div>
                    </div>
                    <div *ngIf="partidaForm.get('modo_juego')?.invalid && partidaForm.get('modo_juego')?.touched"
                        class="text-red-500 text-sm mt-1">
                        Selecciona un modo de juego
                    </div>
                </div>

                <!-- Dificultad -->
                <div class="space-y-2">
                    <label class="block text-lg font-medium text-[var(--greek-blue)]">Dificultad</label>
                    <div class="grid grid-cols-3 gap-4">
                        <div *ngFor="let dificultad of dificultades" class="relative">
                            <input type="radio" [id]="'dificultad-' + dificultad" [value]="dificultad"
                                formControlName="dificultad" class="hidden peer">
                            <label [for]="'dificultad-' + dificultad"
                                class="block p-4 text-center border-2 rounded-lg cursor-pointer transition-all"
                                [ngClass]="{
                    'border-[var(--greek-gold)] bg-white': partidaForm.get('dificultad')?.value === dificultad,
                    'border-gray-300 bg-gray-100': partidaForm.get('dificultad')?.value !== dificultad
                  }">
                                <span class="block font-medium capitalize text-[var(--greek-blue)]">{{ dificultad
                                    }}</span>
                            </label>
                        </div>
                    </div>
                    <div *ngIf="partidaForm.get('dificultad')?.invalid && partidaForm.get('dificultad')?.touched"
                        class="text-red-500 text-sm mt-1">
                        Selecciona una dificultad
                    </div>
                </div>

                <!-- Categoría -->
                <div class="space-y-2">
                    <label class="block text-lg font-medium text-[var(--greek-blue)]">Categoría</label>
                    <select formControlName="id_categoria"
                        class="w-full p-3 border-2 border-[var(--greek-gold)] rounded-lg focus:outline-none bg-white text-[var(--greek-blue)]">
                        <option value="" class="text-[var(--greek-blue)]">Selecciona una categoría</option>
                        <option *ngFor="let categoria of categorias" [value]="categoria.id"
                            class="text-[var(--greek-blue)]">{{ categoria.nombre }}</option>
                    </select>
                    <div *ngIf="partidaForm.get('id_categoria')?.invalid && partidaForm.get('id_categoria')?.touched"
                        class="text-red-500 text-sm mt-1">
                        Selecciona una categoría
                    </div>
                </div>

                <div class="pt-4">
                    <button type="submit" class="w-full greek-button" [disabled]="!partidaForm.valid"
                        [ngClass]="{'opacity-50 cursor-not-allowed': partidaForm.invalid}">
                        Comenzar desafío
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>